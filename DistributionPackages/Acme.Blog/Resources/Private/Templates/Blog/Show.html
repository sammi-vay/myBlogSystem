<f:layout name="Default" />

<f:section name="MainContent">
	<f:if condition="{blog.posts}">
		<f:then>
			<ul>
				<f:for each="{blog.posts}" as="post">
					<li class="post">
						<f:render partial="PostActions" arguments="{post: post}"/>

						<h2>
							<f:link.action action="show" controller="post" arguments="{post: post}">{post.subject}</f:link.action>
						</h2>
						<p>
							Tags: not implemented yet<br>
								Comments count: {post.comments -> f:count()}
						</p>
						<f:render partial="PostMetaData" arguments="{post: post}"/>
					</li>
				</f:for>
			</ul>
		</f:then>
		<f:else>
			<p>No posts created yet.</p>
		</f:else>
	</f:if>
	<p>
		<f:link.action action="new" controller="post" arguments="{blog: blog}">
			Create a new post
		</f:link.action>
	</p>
</f:section>
